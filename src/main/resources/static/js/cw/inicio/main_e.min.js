var $table=$('#tblRegistros'),pageNumber=0,pageSize=0,tipoEstudio='',errorClass='invalid',errorElement='em';$(function(){$(document).on('keypress',function(c){c.target.tagName.toLowerCase();c.keyCode===$.ui.keyCode.ENTER&&c.preventDefault()});var a=$('meta[name=\'_csrf\']').attr('content'),b=$('meta[name=\'_csrf_header\']').attr('content');$(document).ajaxSend(function(c,d){d.setRequestHeader(b,a)}),pageSetUp(),listarRegistros(),validarBusqueda(),$('#btnFiltrar').click(function(){listarRegistros()})});function listarRegistros(){if($('#frm_busqueda').valid()){$table.bootstrapTable('destroy');var b=$('#txtFiltro').val(),c=$('#Tipo').val(),d=$('#Beneficiario').val();(null==b||''==b)&&(b='0'),(null==c||''==c)&&(c='0'),(null==d||''==d)&&(d='0'),$table.bootstrapTable({url:'/gestion/contenido-web/obtenerListado/estudio/'+b+'/'+c+'/'+d,pagination:!0,sidePagination:'client',pageSize:10,onLoadSuccess:function(){tipoEstudio=c},onLoadError:function(f){exception(f.status,f.responseJSON.error)}})}}function desactivar(a,b){$.SmartMessageBox({title:'<i class=\'fa fa-bullhorn\'></i> Notificaciones Prosemer',content:'<br/>\xBFEst\xE1s seguro que quieres cambiar el estado inicio de este contenido?',buttons:'[No][Si]'},function(c){if('Si'===c){var d={};d.id=a,b?d.flagInicio=!1:!b&&(d.flagInicio=!0),d.tipoEstudioId=tipoEstudio,d.tipoContenido=1,$('#load_pace').show(),$.ajax({type:'PUT',contentType:'application/x-www-form-urlencoded; charset=UTF-8',url:'/gestion/contenido-web/desactivar/inicio',dataType:'json',data:d,success:function(f,g){'success'==g&&('-1'==f?exception('ERROR 500','La operaci\xF3n no ha podido ser procesada. Por favor contactar con el administror del sistema.'):$.smallBox({content:'<i> Se actualiz\xF3 el registro...</i>'}))},error:function(f){exception(f.status,f.responseJSON.error)},complete:function(){limpiarBusqueda(),listarRegistros()}})}else;})}function Opciones(a,b){var d='';return 0<b.id&&(d='<a href=\'#\' onclick=\'javascript:desactivar('+b.id+','+b.flagInicio+');\' title=\'Agregar a Inicio/Elimnar de Inicio\'><i class=\'glyphicon glyphicon-refresh\'></i></a>'),d}function isActived(a,b){return b.flagInicio?'<span class="label label-success">Activo</span>':'<span class="label label-danger">Inactivo</span>'}function validarBusqueda(){$('#frm_busqueda').validate({ignore:'.ignore',errorClass:'my-error-class',validClass:'my-valid-class',rules:{Filtro:{required:!0},Tipo:{digits:!0}},messages:{Filtro:{required:'Debe seleccionar un tipo de formato'},Tipo:{digits:'Debe seleccionar un tipo'}},submitHandler:function(){}})}function limpiarBusqueda(){$('#txtFiltro').val('')}